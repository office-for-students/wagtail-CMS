{% extends "base.html" %}
{% include 'courses/partials/sticky_header.html' %}
{% load staticfiles sass_tags wagtailcore_tags discover_uni_tags %}


{% block extra_css %}
    <link href="{% sass_src 'scss/course_comparison.scss' %}?{% code_version %}" rel="stylesheet" type="text/css">
    <link href="{% sass_src 'scss/course_detail.scss' %}?{% code_version %}" rel="stylesheet" type="text/css">
{% endblock %}

{% block extra_js %}
    <script type="text/javascript" src="{% static 'js/course_comparison.js' %}?{% code_version %}"></script>
    <script type="text/javascript" src="{% static 'js/course_detail_accordions.js' %}?{% code_version %}"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/highcharts-more.js"></script>
    <script src="https://code.highcharts.com/modules/solid-gauge.js"></script>
    <script src="https://code.highcharts.com/modules/accessibility.js"></script>
    <script type="text/javascript" src="{% static 'js/doughnut_chart.js' %}?{% code_version %}"></script>
    <script type="text/javascript" src="{% static 'js/bar_chart.js' %}?{% code_version %}"></script>
    <script type="text/javascript" src="{% static 'js/label_explanation_popups.js' %}?{% code_version %}"></script>
    <script type="text/javascript" src="{% static 'js/overview_blocks.js' %}?{% code_version %}"></script>

    <script>
        function toggle_icon(icon_id) {
            var icon_name = "#" + icon_id;
            $(icon_name).toggleClass("fa-plus");
            $(icon_name).toggleClass("fa-minus");
        }
    </script>

{% endblock %}

{% block content %}

    <div class="d-block d-sm-none comparison__xs-rotate mb-sm-4 course-comparison-body">
        <div class="mx-auto p-4">
            <div class="row my-3">
                <div class="mx-auto">
                    <i class="fas fa-mobile-alt fa-5x align-text-bottom mx-3"></i>
                    <i class="fas fa-sync-alt fa-5x align-text-bottom mx-3"></i>
                    <i class="fas fa-mobile-alt fa-rotate-90 fa-5x align-text-bottom mx-4"></i>
                </div>

            </div>
            <h3 class="text-center">Please rotate your device to landscape to view this page</h3>
        </div>
    </div>
    <div class="comparison d-none d-sm-block mb-5">
        <div class="comparison__body pt-1">

            <h2 class="comparison__heading">
                {{ page.compare_heading }}
            </h2>

            <div class="comparison__top-container">
                <div class="comparison__top-container-add-btn" style="">
                    <a href="/bookmarks-manage/">
                        <button class="comparison__top-container-add-btn-add-courses-button">
                            <span style="font-size:20px;">+</span> <span
                                style="padding-left: 10px;">Add saved course</span>
                        </button>
                    </a>
                    </form>
                    <p class="comparison__top-container-add-btn-compare-text" style="display: inline-block;">Compare up
                        to 7 courses</p>
                </div>
                <div class="comparison__top-container-need-help-box">
                    <h4>Need help choosing?</h4>
                    <p>Search our guidelines for help making the best decision for you.</p>
                    <p style="margin-bottom: 0px;">Go to Information and advice</p>
                </div>

            </div>
            <div class="course-detail__course-container">
                {% if courses %}
                    <div class="course-detail__course-selected">
                        {{ courses|length }} courses selected
                    </div>
                    {% for course in courses %}
                        {% include 'courses/partials/course_comparison_overview.html' %}
                    {% endfor %}
                {% endif %}
            </div>

            <style>
                .table_row {
                    display: flex;
                    color: black;
                    background: #f2f2f2;
                    min-height: 44px;
                    margin-bottom: 10px;
                }

                .table_row--header {
                    color: black;
                    background: #f2f2f2;
                    height: 44px;

                    line-height: 44px;
                    margin-bottom: 10px;
                    text-align: left;
                    display: block;
                    padding-left: 10px;
                    font-weight: 600;
                }

                .table__column-first {
                    color: black;
                    width: 250px;
                    text-align: left;
                    flex-grow: 100;
                    vertical-align: middle;
                    line-height: 44px;
                    padding-left: 10px;
                }

                .table__column {
                    flex-grow: 100;
                    text-align: center;
                    padding: 10px;

                }
            </style>

            <div class="table_row--header">
                Course Details
            </div>
            <div class="table_row">
                <div class="table__column-first">
                    {% get_translation key='study_mode' language=page.get_language %}
                </div>
                {% for course in courses %}
                    {% include 'courses/partials/comparison_courses_row.html' with content=course.mode.label %}
                {% endfor %}
            </div>

            <div class="table_row">
                <div class="table__column-first">
                    {% get_translation key='length' language=page.get_language %}
                </div>
                {% for course in courses %}
                    {% include 'courses/partials/comparison_courses_row.html' with content=course.length.label %}
                {% endfor %}
            </div>
            <div class="table_row">
                <div class="table__column-first">
                    {% get_translation key='locations' language=page.get_language %}
                </div>
                {% for course in courses %}
                    <div class="table__column">
                        {% for location in course.all_locations %}
                            {{ forloop.counter }}. {{ location }}<br/>
                        {% endfor %}
                    </div>
                {% endfor %}
            </div>
            <div class="table_row">
                <div class="table__column-first">
                    {% get_translation key='distance_learning' language=page.get_language %}
                </div>
                {% for course in courses %}
                    {% include 'courses/partials/comparison_courses_row.html' with content=course.distance_learning.display_label %}
                {% endfor %}
            </div>
            <div class="table_row">
                <div class="table__column-first">
                    {% get_translation key='placement_year' language=page.get_language %}
                </div>
                {% for course in courses %}
                    {% include 'courses/partials/comparison_courses_row.html' with content=course.sandwich_year.label %}
                {% endfor %}
            </div>
            <div class="table_row">
                <div class="table__column-first">
                    {% get_translation key='year_abroad' language=page.get_language %}
                </div>
                {% for course in courses %}
                    {% include 'courses/partials/comparison_courses_row.html' with content=course.year_abroad.label %}
                {% endfor %}
            </div>
            <div class="table_row">
                <div class="table__column-first">
                    {% get_translation key='foundation_year' language=page.get_language %}
                </div>
                {% for course in courses %}
                    {% include 'courses/partials/comparison_courses_row.html' with content=course.foundation_year.label %}
                {% endfor %}
            </div>


            {#    #TODO: Remove after taking out the corresponding JS#}
            {#            <div class="comparison__courses course-detail">#}
            {#                <div class="comparison__course-columns">#}
            {#                    <div class="comparison__course-column">#}
            {#                        <div class="comparison__course">#}
            {#                            <div id="course1" class="comparison__course-selector">#}
            {#                                <select id="course1-select">#}
            {#                                    <option value="na" disabled selected>{% get_translation key='select_course' language=page.get_language %}</option>#}
            {#                                </select>#}
            {#                            </div>#}
            {##}
            {#                            {% if course1 %}#}
            {#                                {% include 'courses/partials/base_gradient.html' %}#}
            {#                                    {% include 'courses/partials/comparison_course_overview.html' with course=course1 %}#}
            {#                            {% endif %}#}
            {#                        </div>#}
            {#                    </div>#}
            {##}
            {#                    <div class="comparison__course-column">#}
            {#                        <div class="comparison__course">#}
            {#                            <div id="course2" class="comparison__course-selector">#}
            {#                                <select id="course2-select">#}
            {#                                    <option value="na" disabled selected>{% get_translation key='select_course' language=page.get_language %}</option>#}
            {#                                </select>#}
            {#                            </div>#}
            {##}
            {#                            {% if course2 %}#}
            {#                                {% include 'courses/partials/base_gradient.html' %}#}
            {#                                {% include 'courses/partials/comparison_course_overview.html' with course=course2 %}#}
            {#                            {% endif %}#}
            {#                        </div>#}
            {#                    </div>#}
            {#                </div>#}
            {#                {{ coure }}#}
            {#                {% if course1 and course2 %}#}
            {#                    <div class="course-detail__body">#}
            {##}
            {#                            <div class="course-detail__accordion-block">#}
            {#                                {% for accordion in page.accordions %}#}
            {#                                    {% create_list course1 course2 as courses %}#}
            {#                                    {% should_show_accordion courses accordion.value.data_set as show_accordion %}#}
            {#                                    {% if show_accordion %}#}
            {##}
            {#                                    <div id="{{ accordion.value.data_set }}" class="course-detail__accordion">#}
            {#                                        <div class="">#}
            {#                                            <button class="course-detail__accordion-heading" onclick="toggle_icon('accordion_icon_{{ forloop.counter }}')">#}
            {#                                                <h2 id="course-detail__accordion-heading-{{ forloop.counter }}"#}
            {#                                                    aria-controls="course-detail__accordion-body-{{ forloop.counter }}"#}
            {#                                                    aria-label="Show {{ accordion.value.heading }} content"#}
            {#                                                    aria-expanded="false">#}
            {#                                                    <i id="accordion_icon_{{ forloop.counter }}" class="fas fa-plus pr-3 text-white"></i>#}
            {#                                                    {{ accordion.value.heading }}#}
            {##}
            {#                                                </h2>#}
            {#                                            </button>#}
            {#                                        </div>#}
            {##}
            {#                                        <div id="course-detail__accordion-body-{{ forloop.counter }}"#}
            {#                                            class="course-detail__accordion-body"#}
            {#                                            aria-labelledby="course-detail__accordion-heading-{{ forloop.counter }}">#}
            {#                                            {% include 'courses/partials/comparison_'|add:accordion.value.data_set|add:'_body.html' with block=accordion %}#}
            {#                                        </div>#}
            {#                                    </div>#}
            {##}
            {##}
            {#                                    {% endif %}#}
            {#                                {% endfor %}#}
            {#                            </div>#}
            {#                    </div>#}
            {#                {% endif %}#}
            {#            </div>#}

            <div hidden class="">
                <div class="course-detail__further-info-block">
                    <a href="/dummy-link" class="course-detail__other-courses-link">
                        <img class="course-detail__other-courses-link-icon"
                             src="{% static 'images/location_paddle.svg' %}"
                             alt="">
                        <span>{% autoescape off %}
                            {% get_translation key='similar_courses_here' language=page.get_language %}{% endautoescape %}</span>
                    </a>

                    <a href="/dummy-link" class="course-detail__other-courses-link">
                        <img class="course-detail__other-courses-link-icon"
                             src="{% static 'images/curved_arrow_right.svg' %}"
                             alt="">
                        <span>{% autoescape off %}
                            {% get_translation key='similar_courses_elsewhere' language=page.get_language %}{% endautoescape %}</span>
                    </a>
                </div>
            </div>

            <!-- {% include 'courses/partials/compare-popup-bar.html' %} -->
        </div>
    </div>
{% endblock %}
